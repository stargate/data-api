enabled: *global-vector-kube
api:
  port: &jsonapi-port 8181
metrics:
  port: 8181

# image registry
image:
  registry: *global-docker-registry
  tag: *global-json-api-version
  pullPolicy: *global-pull-policy
  repository: "stargateio/jsonapi"

# API instance replica count
replicaCount: 2

cpuRequest: 4000m
memoryRequest: 6Gi
cpuLimit: 4000m
memoryLimit: 8Gi
sessionCacheTTL: 300
sessionCacheMaxSize: 50
datastaxJavaDriverOptions: "-Ddatastax-java-driver.advanced.metadata.token-map.enabled=false -Ddatastax-java-driver.advanced.metadata.schema.request-timeout=30000 -Ddatastax-java-driver.advanced.retry-policy.class=io.stargate.sgv2.jsonapi.service.cqldriver.CqlProxyRetryPolicy -Ddatastax-java-driver.create.basic.request.timeout=30000"
accessLogPattern: "%h %l %t \\\"%r\\\" %s %b \\\"%{i,User-Agent}\\\""
cqlrouter:
  httpPort: 8182
  metricsPort: 8182
  cqlPort: 9042
  etcdHosts: "http://etcd.etcd.svc.cluster.local:2379"
  image:
    registry: *global-cqlrouter-image-registry
    repository: *global-cqlrouter-image-repository
    tag: *global-cqlrouter-image-version
    pullPolicy: *global-cqlrouter-image-pull-policy
  resources:
    limits:
      cpu: "4000m"
      memory: "4Gi"
    requests:
      cpu: "4000m"
      memory: "4Gi"

# topology key for anti affinity
topologyKey: "kubernetes.io/hostname"
enableRemoteDebug: false
devRemoteDebugParams: "-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005 "
probe:
  readiness:
    failureThreshold: 5
    httpGet:
      path: /stargate/health/ready
      port: *jsonapi-port
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 2
  liveness:
    failureThreshold: 20
    httpGet:
      path: /stargate/health/live
      port: *jsonapi-port
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 2

