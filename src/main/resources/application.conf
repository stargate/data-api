datastax-java-driver {
  advanced.protocol {
    version = V4
  }
  advanced.retry-policy {
      class = io.stargate.sgv2.jsonapi.service.cqldriver.CqlProxyRetryPolicy
    }
  advanced.session-leak.threshold = 0
  advanced.connection {
    pool.local.size = 8
  }
  advanced.metadata {
    schema.request-timeout = 10 seconds
  }
  advanced.metrics {
    id-generator{
      class = io.stargate.sgv2.jsonapi.service.cqldriver.CustomTaggingMetricIdGenerator
    }
    factory.class = MicrometerMetricsFactory
    session {
      enabled = [cql-requests, cql-client-timeouts, throttling.delay]
      cql-requests {
        refresh-interval = 30 seconds
      }
      throttling.delay {
        refresh-interval = 30 seconds
      }
    }
    node {
      enabled = [cql-messages, errors.request.unsent, errors.request.write-timeouts, errors.request.read-timeouts, errors.request.unavailables, retries.total, speculative-executions]
    }
  }
  advanced.request-tracker {
    classes = [RequestLogger]
    logs {
      success.enabled = false
      slow {
        threshold = 1 second
        enabled = true
      }
      error.enabled = true
      max-query-length = 500
      show-values = false
      max-value-length = 50
      max-values = 50
      show-stack-traces = true
    }
  }
  basic.request.timeout = 20 seconds
  profiles {

    create {
      basic.request.timeout = 10 seconds
    }

    drop {
      basic.request.timeout = 15 seconds
    }

    truncate {
      basic.request.timeout = 15 seconds
    }

    count {
      basic.request.timeout = 10 seconds
    }
  }
}